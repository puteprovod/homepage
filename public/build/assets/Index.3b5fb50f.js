import{L as u,H as g,r as h,o as i,c as r,a as p,e as x,b as t,F as d,g as _,d as y,n as f,t as n}from"./app.8e49636f.js";import{M as b}from"./MainLayout.0d23c7c1.js";import{_ as w}from"./_plugin-vue_export-helper.cdc0426e.js";const v={name:"index",layout:b,props:["accounts","sum","status"],data(){return{statusData:null,newCost:null,accountValues:null}},components:{Link:u,Head:g},computed:{},mounted(){this.newFinalCost()},methods:{updateAccount(e){const o=document.getElementById(`value[${e}]`).value;axios.patch(`/accounts/${e}`,{id:e,value:o}).then(l=>{this.statusData=l.data.status,this.newCost=l.data.newCost,this.showStatusData(e)}).catch(l=>console.log(l))},newFinalCost(){let e=0,o=this.$refs.costOriginal;for(let l=o.length-1;l>=0;l--)e+=parseInt(o[l].value);this.$refs.finalCost.textContent=this.formatCost(e)},formatCost(e){return Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",currencyDisplay:"symbol",maximumFractionDigits:0}).format(e)},showStatusData(e){this.statusData==="ok"?(document.getElementById(`imag[${e}]`).src="/img/success-image.png",document.getElementById(`imag[${e}]`).title=this.statusData,this.$refs.costOriginal[e].value=this.newCost,document.getElementById(`cost[${e}]`).textContent=this.formatCost(this.newCost),this.newFinalCost()):(document.getElementById(`imag[${e}]`).src="/img/error-image.png",document.getElementById(`cost[${e}]`).textContent=this.statusData,document.getElementById(`imag[${e}]`).title=this.statusData)},onKeyDown(e){document.getElementById(`imag[${e}]`).src="/img/enter.png",document.getElementById(`imag[${e}]`).style.visibility="visible"},onClick(e){this.updateAccount(e),document.getElementById(`imag[${e}]`).style.visibility="visible"},getColorClass(e){switch(e){case 22:return"bg-green-100 border-green-200";case 23:return"bg-green-100 border-green-200";case 24:return"bg-red-100 border-red-200";case 25:return"bg-indigo-100 border-indigo-200";case 26:return"bg-blue-100 border-blue-200";case 27:return"bg-yellow-100 border-yellow-200"}}}},C=t("input",{type:"hidden","data-id-page":"accounts"},null,-1),I={key:0,class:"mt-4 text-center"},$=t("p",{class:"bg-yellow-100 border-yellow-200 text-sm"},"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435: \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u0435\u0439 \u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u044E\u0442\u0441\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E",-1),B=[$],D={class:"flex flex-col"},k={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},E={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},F={class:"overflow-hidden"},V={class:"min-w-full"},H=t("thead",{class:"border-b"},[t("tr",null,[t("th",{scope:"col",class:"text-sm hidden lg:table-cell font-medium font-bold text-gray-900 px-6 py-4 text-left"}," ## "),t("th",{scope:"col",class:"text-sm font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0447\u0435\u0442\u0430 "),t("th",{scope:"col",class:"text-sm hidden lg:table-cell font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u0412\u0438\u0434 \u0441\u0447\u0435\u0442\u0430 "),t("th",{scope:"col",colspan:"2",class:"text-sm text-center font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u0411\u0430\u043B\u0430\u043D\u0441 "),t("th",{scope:"col",class:"text-sm hidden xl:table-cell text-center font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 "),t("th",{scope:"col",class:"text-sm hidden md:table-cell text-center font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0432 \u20BD ")])],-1),N={class:"text-sm hidden lg:table-cell text-gray-900 w-20 font-light px-4 py-3 whitespace-nowrap"},L=["src"],O={class:"text-sm text-gray-900 font-light px-4 py-3"},S={class:"px-4 py-3 whitespace-nowrap hidden lg:table-cell text-sm font-medium text-gray-900"},A={class:"text-sm text-gray-900 font-light whitespace-nowrap"},K={class:"inline-block ml-2"},M=["onInput","id","value"],R={class:"inline-block align-middle ml-1.5"},U=["onClick","id"],z={class:"text-sm text-gray-900 font-light px-4 py-3 whitespace-nowrap"},T={class:"text-sm hidden xl:table-cell text-gray-900 font-light px-4 py-3 whitespace-nowrap"},j={class:"text-sm hidden md:table-cell text-gray-900 font-light px-4 py-3 whitespace-nowrap"},q=["id","value"],G=["id"],J={class:"align-middle"},P={colspan:"100%",class:"text-sm text-right font-bold text-gray-900 px-4 py-3 whitespace-nowrap"},Q={ref:"finalCost"};function W(e,o,l,X,Y,a){const c=h("Head");return i(),r(d,null,[p(c,{title:"\u0421\u0447\u0435\u0442\u0430"}),C,e.$page.props.auth.user?x("",!0):(i(),r("div",I,B)),t("div",D,[t("div",k,[t("div",E,[t("div",F,[t("table",V,[H,t("tbody",null,[(i(!0),r(d,null,_(l.accounts,s=>(i(),r("tr",{class:f(a.getColorClass(s.category_id)+" border-b")},[t("td",N,[t("img",{alt:"image",class:"img-fluid whitespace-nowrap",style:{height:"31px"},src:"/storage/"+s.image},null,8,L)]),t("td",O,n(s.title),1),t("td",S,n(s.category_title),1),t("td",A,[t("div",K,[t("input",{onInput:m=>a.onKeyDown(s.id),class:"rounded-full h-8 w-24 lg:w-40 min-w-full text-sm border-gray-400 text-right",id:"value["+s.id+"]",ref_for:!0,ref:"value["+s.id+"]",placeHolder:"value",type:"number",value:s.value},null,40,M)]),t("div",R,[t("img",{onClick:m=>a.onClick(s.id),id:"imag["+s.id+"]",title:"submit",class:"invisible cursor-pointer",src:"/img/enter.png",style:{width:"25px",height:"25px"},alt:"V"},null,8,U)])]),t("td",z,n(s.currency_title),1),t("td",T,n(s.comment),1),t("td",j,[t("input",{ref_for:!0,ref:"costOriginal",type:"hidden",id:"costOriginal["+s.id+"]",value:s.cost},null,8,q),t("span",{id:"cost["+s.id+"]"},n(a.formatCost(s.cost)),9,G)])],2))),256)),t("tr",J,[t("td",P,[y(" \u041E\u0431\u0449\u0438\u0439 \u0431\u0430\u043B\u0430\u043D\u0441 \u0441\u0447\u0435\u0442\u043E\u0432: "),t("u",null,[t("span",Q,null,512)])])])])])])])])])],64)}const st=w(v,[["render",W]]);export{st as default};
