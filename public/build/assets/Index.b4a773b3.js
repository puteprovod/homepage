import{L as m,o as i,c,e as g,a as t,F as d,g as u,d as p,n as h,t as n}from"./app.eb849b85.js";import{M as x}from"./MainLayout.a0637f07.js";import{_ as y}from"./_plugin-vue_export-helper.cdc0426e.js";const _={name:"index",layout:x,props:["accounts","sum","status"],data(){return{statusData:null,newCost:null,accountValues:null}},components:{Link:m},computed:{},mounted(){this.newFinalCost()},methods:{updateAccount(e){const o=document.getElementById(`value[${e}]`).value;axios.patch(`/accounts/${e}`,{id:e,value:o}).then(l=>{this.statusData=l.data.status,this.newCost=l.data.newCost,this.showStatusData(e)}).catch(l=>console.log(l))},newFinalCost(){let e=0,o=document.getElementsByClassName("costOriginal");for(let l=o.length-1;l>=0;l--)e+=parseInt(o[l].value);document.getElementById("finalCost").textContent=this.formatCost(e)},formatCost(e){return Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",currencyDisplay:"symbol",maximumFractionDigits:0}).format(e)},showStatusData(e){this.statusData==="ok"?(document.getElementById(`imag[${e}]`).src="/img/success-image.png",document.getElementById(`imag[${e}]`).title=this.statusData,document.getElementById(`costOriginal[${e}]`).value=this.newCost,document.getElementById(`cost[${e}]`).textContent=this.formatCost(this.newCost),this.newFinalCost()):(document.getElementById(`imag[${e}]`).src="/img/error-image.png",document.getElementById(`cost[${e}]`).textContent=this.statusData,document.getElementById(`imag[${e}]`).title=this.statusData)},onKeyDown(e){document.getElementById(`imag[${e}]`).src="/img/enter.png",document.getElementById(`imag[${e}]`).style.visibility="visible"},onClick(e){this.updateAccount(e),document.getElementById(`imag[${e}]`).style.visibility="visible"},getColorClass(e){switch(e){case 22:return"bg-green-100 border-green-200";case 23:return"bg-green-100 border-green-200";case 24:return"bg-red-100 border-red-200";case 25:return"bg-indigo-100 border-indigo-200";case 26:return"bg-blue-100 border-blue-200";case 27:return"bg-yellow-100 border-yellow-200"}}}},f={key:0,class:"mt-4 text-center"},b=t("p",{class:"bg-yellow-100 border-yellow-200 text-sm"},"\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435: \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u043F\u043E\u043B\u0435\u0439 \u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u044E\u0442\u0441\u044F \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E",-1),w=[b],v={class:"flex flex-col"},C={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},I={class:"py-2 inline-block min-w-full sm:px-6 lg:px-8"},B={class:"overflow-hidden"},E={class:"min-w-full"},$=t("thead",{class:"border-b"},[t("tr",null,[t("th",{scope:"col",class:"text-sm hidden lg:table-cell font-medium font-bold text-gray-900 px-6 py-4 text-left"}," ## "),t("th",{scope:"col",class:"text-sm font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0441\u0447\u0435\u0442\u0430 "),t("th",{scope:"col",class:"text-sm hidden lg:table-cell font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u0412\u0438\u0434 \u0441\u0447\u0435\u0442\u0430 "),t("th",{scope:"col",colspan:"2",class:"text-sm text-center font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u0411\u0430\u043B\u0430\u043D\u0441 "),t("th",{scope:"col",class:"text-sm hidden xl:table-cell text-center font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 "),t("th",{scope:"col",class:"text-sm hidden md:table-cell text-center font-medium font-bold text-gray-900 px-6 py-4 text-left"}," \u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0432 \u20BD ")])],-1),D={class:"text-sm hidden lg:table-cell text-gray-900 w-20 font-light px-4 py-3 whitespace-nowrap"},k=["src"],F={class:"text-sm text-gray-900 font-light px-4 py-3"},V={class:"px-4 py-3 whitespace-nowrap hidden lg:table-cell text-sm font-medium text-gray-900"},N={class:"text-sm text-gray-900 font-light whitespace-nowrap"},L={class:"inline-block ml-2"},O=["onInput","id","value"],S={class:"inline-block align-middle ml-1.5"},A=["onClick","id"],K={class:"text-sm text-gray-900 font-light px-4 py-3 whitespace-nowrap"},M={class:"text-sm hidden xl:table-cell text-gray-900 font-light px-4 py-3 whitespace-nowrap"},R={class:"text-sm hidden md:table-cell text-gray-900 font-light px-4 py-3 whitespace-nowrap"},U=["id","value"],z=["id"],H=t("tr",{class:"align-middle"},[t("td",{colspan:"100%",class:"text-sm text-right font-bold text-gray-900 px-4 py-3 whitespace-nowrap"},[p(" \u041E\u0431\u0449\u0438\u0439 \u0431\u0430\u043B\u0430\u043D\u0441 \u0441\u0447\u0435\u0442\u043E\u0432: "),t("u",null,[t("span",{id:"finalCost"})])])],-1);function T(e,o,l,j,q,a){return i(),c(d,null,[e.$page.props.auth.user?g("",!0):(i(),c("div",f,w)),t("div",v,[t("div",C,[t("div",I,[t("div",B,[t("table",E,[$,t("tbody",null,[(i(!0),c(d,null,u(l.accounts,s=>(i(),c("tr",{class:h(a.getColorClass(s.category_id)+" border-b")},[t("td",D,[t("img",{alt:"image",class:"img-fluid whitespace-nowrap",style:{height:"31px"},src:"/storage/"+s.image},null,8,k)]),t("td",F,n(s.title),1),t("td",V,n(s.category_title),1),t("td",N,[t("div",L,[t("input",{onInput:r=>a.onKeyDown(s.id),class:"rounded-full h-8 w-24 lg:w-40 min-w-full text-sm border-gray-400 text-right",id:"value["+s.id+"]",placeHolder:"value",type:"number",value:s.value},null,40,O)]),t("div",S,[t("img",{onClick:r=>a.onClick(s.id),id:"imag["+s.id+"]",title:"submit",class:"invisible cursor-pointer",src:"/img/enter.png",style:{width:"25px",height:"25px"},alt:"V"},null,8,A)])]),t("td",K,n(s.currency_title),1),t("td",M,n(s.comment),1),t("td",R,[t("input",{class:"costOriginal",type:"hidden",id:"costOriginal["+s.id+"]",value:s.cost},null,8,U),t("span",{id:"cost["+s.id+"]"},n(a.formatCost(s.cost)),9,z)])],2))),256)),H])])])])])])],64)}const Q=y(_,[["render",T]]);export{Q as default};
